(this.webpackJsonpmedilinkup=this.webpackJsonpmedilinkup||[]).push([[0],{660:function(e,t,a){e.exports=a(948)},665:function(e,t,a){},948:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),o=(a(665),a(63)),l=a(42),s=a(6),u=a(40),d=a(183),m=a(3),f=a(24),p=a(257),b=a(336),h=a.n(b),g=a(81),O=a.n(g),E=a(49),j=a.n(E),y=a(95),v=a(117),w=a(983),_=a(981),x=a(421),k=a(955),S=a(84),C=a(972),N=a(958),P=a(984),R=a(552),T=a(620),I=a.n(T),D=a(621),z=a.n(D),B=a(625),A=a.n(B),L=a(980),M=a(177),U=a(986),F=a(982),W=a(627),G=a.n(W),J=a(617),H=a.n(J),$=a(619),K=a.n($),q=a(618),Y=a.n(q),V=a(622),Q=a.n(V),X=a(626),Z=a.n(X),ee=a(623),te=a.n(ee),ae=a(624),ne=a.n(ae),re=a(628),ce=a.n(re),ie=a(616),oe=a.n(ie),le=a(185),se=a(200),ue=a(203),de=a(324),me=a(971),fe=a(966),pe=a(418),be=a(419),he=a(956),ge=a(417),Oe=a(181),Ee=a.n(Oe),je=a(258),ye=a.n(je),ve=a(37),we=a.n(ve),_e=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("login",JSON.stringify({login:t.healthworker.login,id:t.healthworker.id,fname:t.healthworker.fname,lname:t.healthworker.lname,token:t.healthworker.token})),Object(u.a)(Object(u.a)({},e),{},{login:t.healthworker.login,id:t.healthworker.id,fname:t.healthworker.fname,lname:t.healthworker.lname,token:t.healthworker.token});case"LOGOUT":return localStorage.clear(),Object(u.a)(Object(u.a)({},e),{},{login:!1,id:"",token:"",fname:"",lname:""});default:return e}},xe=Object(n.createContext)(),ke=function(e){var t=Object(n.useReducer)(_e,[]),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement(xe.Provider,{value:{healthworker:c,dispatch:i}},e.children)},Se=a(213),Ce=a(630),Ne=a(495),Pe=a(974),Re=se.a[900],Te=we.a.create({baseURL:"http://localhost:3000/api"}),Ie=Object(y.a)((function(e){return{root:{},control:{padding:e.spacing(5),textAlign:"center",margin:e.spacing(5)},textcolor:{color:Re},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),De=function(){var e=Ie(),t=Object(n.useContext)(xe).dispatch,a=Object(n.useState)("john.doe@gmail.com"),c=Object(s.a)(a,2),i=c[0],o=c[1],d=Object(n.useState)("password"),f=Object(s.a)(d,2),b=f[0],h=f[1],g=Object(l.f)(),O=r.a.useState(!1),E=Object(s.a)(O,2),j=E[0],y=E[1],v=Object(n.useState)(!1),w=Object(s.a)(v,2),_=w[0],x=w[1],k=Object(n.useState)(""),S=Object(s.a)(k,2),N=S[0],P=S[1],R=Object(n.useState)(!1),T=Object(s.a)(R,2),I=T[0],D=T[1],z=r.a.useState({amount:"",password:"",weight:"",weightRange:"",showPassword:!1}),B=Object(s.a)(z,2),A=B[0],L=B[1],M=function(e){e.preventDefault(),g.push("/signup")};return Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("login"));e?(D(!1),g.push("/dashboard/"+e.id)):D(!0)}),[]),r.a.createElement("div",{className:e.root},I&&r.a.createElement(me.a,{container:!0,className:e.root,spacing:2},r.a.createElement(me.a,{item:!0,xs:3},r.a.createElement("p",null)),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement("div",null,r.a.createElement(Ce.a,{className:e.backdrop,open:j},r.a.createElement(Ne.a,{color:"inherit"}))),r.a.createElement(Se.a,{className:e.control},r.a.createElement("div",null,_&&r.a.createElement(U.a,{severity:"error"},N)),r.a.createElement("h1",{style:{color:Re}},"Sign in to your account"),r.a.createElement(C.a,null),r.a.createElement("p",null,"Get a bird's eye view on patients across countries"),r.a.createElement(C.a,null),r.a.createElement("form",null,r.a.createElement(de.a,{style:{marginTop:30,marginBottom:30},required:!0,fullWidth:!0,className:Object(m.a)(e.margin,e.textField),id:"outlined-basic",label:"Email",variant:"outlined",value:i,onChange:function(e){return o(e.target.value)}}),r.a.createElement(ge.a,{style:{marginBottom:30},fullWidth:!0,className:Object(m.a)(e.margin,e.textField),variant:"outlined"},r.a.createElement(pe.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(fe.a,{id:"outlined-adornment-password",type:A.showPassword?"text":"password",value:b,onChange:function(e){return h(e.target.value)},required:!0,endAdornment:r.a.createElement(be.a,{position:"end"},r.a.createElement(p.a,{"aria-label":"toggle password visibility",onClick:function(){L(Object(u.a)(Object(u.a)({},A),{},{showPassword:!A.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end"},A.showPassword?r.a.createElement(Ee.a,null):r.a.createElement(ye.a,null))),labelWidth:70}),r.a.createElement(he.a,{id:"my-helper-text"},"We'll never share your email.")),r.a.createElement("p",{style:{marginBottom:30}},"By clicking Sign In, you agree to our Terms of Use and our Privacy Policy."),r.a.createElement(le.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),y(!0),Te.post("/healthworkers/login",{contact:{email:i},password:b}).then((function(e){t({type:"LOGIN",healthworker:{login:!0,id:e.data._id,token:e.data.token,fname:e.data.fname,lname:e.data.lname}}),x(!1),P("");e.data.token;setTimeout((function(){o(""),h(""),g.push("/dashboard/"+e.data._id)}),500)})).catch((function(e){t({type:"LOGOUT"}),setTimeout((function(){y(!1),x(!0),e.response&&"Not activated"===e.response.data.message?P("Your account is not Activated yet. Activation process is ongoing and you'll be informed by email when your account is activated"):P("Auth failure! Please create an account or consider recovering your password.")}),500)}))}},"Sign In"),r.a.createElement("p",{style:{marginBottom:30,fontWeight:"bold"}},"Forgot your password?"),r.a.createElement("p",{onClick:M,style:{marginBottom:30,fontSize:"medium",fontWeight:"bold"}},r.a.createElement(Pe.a,{href:"#",onClick:M},"Don't have an account? Sign up!"))))),r.a.createElement(me.a,{item:!0,xs:3},r.a.createElement("p",null))))},ze=a(988),Be=se.a[900],Ae=we.a.create({baseURL:"http://localhost:3000/api"});function Le(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var Me=Object(y.a)((function(e){return{root:{},formControl:{minWidth:120},control:{padding:e.spacing(5),textAlign:"center",margin:e.spacing(5)},textcolor:{color:Be},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ue=function(){var e=Me(),t=Object(l.f)(),a=Object(n.useState)(""),c=Object(s.a)(a,2),i=c[0],o=c[1],d=Object(n.useState)(""),f=Object(s.a)(d,2),b=f[0],h=f[1],g=Object(n.useState)([]),O=Object(s.a)(g,2),E=O[0],j=O[1],y=Object(n.useState)(""),v=Object(s.a)(y,2),w=v[0],_=v[1],x=Object(n.useState)([]),k=Object(s.a)(x,2),S=k[0],N=k[1],P=Object(n.useState)(""),R=Object(s.a)(P,2),T=R[0],I=R[1],D=Object(n.useState)("john.doe@gmail.com"),z=Object(s.a)(D,2),B=z[0],A=z[1],L=Object(n.useState)("password"),M=Object(s.a)(L,2),F=M[0],W=M[1],G=Object(n.useState)(""),J=Object(s.a)(G,2),H=J[0],$=J[1],K=r.a.useState(!1),q=Object(s.a)(K,2),Y=q[0],V=q[1],Q=Object(n.useState)(!1),X=Object(s.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useState)([]),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),ie=Object(s.a)(ce,2),oe=ie[0],se=ie[1],ue=Object(n.useState)(""),he=Object(s.a)(ue,2),Oe=he[0],je=he[1],ve=Object(n.useState)(!1),we=Object(s.a)(ve,2),_e=we[0],xe=we[1],ke=r.a.useState({amount:"",password:"",weight:"",weightRange:"",showPassword:!1}),Re=Object(s.a)(ke,2),Te=Re[0],Ie=Re[1],De=r.a.useState({amount:"",password:"",weight:"",weightRange:"",showPassword:!1}),Ue=Object(s.a)(De,2),Fe=Ue[0],We=Ue[1];return Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("login"));e?(se(!1),t.push("/dashboard/"+e.id)):se(!0)}),[]),Object(n.useEffect)((function(){V(!0),Ae.get("/countries",Le()).then((function(e){var t=e.data,a=[];t.forEach((function(e){a.push(e.name)})),j(a),ee(!1),re([]),setTimeout((function(){V(!1)}),500)})).catch((function(e){ee(!0),re(["Could not load countries. Try again later and contact admin if problem persist"]),V(!1)}))}),[]),Object(n.useEffect)((function(){V(!0),w&&Ae.get("/countries/"+w).then((function(e){N(e.data.cities.sort()),e.data.cities.includes(T)||I(e.data.cities[0]),ee(!1),re([]),setTimeout((function(){V(!1)}),100)})).catch((function(e){ee(!0),re(["Could not load cities. Try again later and contact admin if problem persist"]),V(!1)}))}),[w]),r.a.createElement("div",{className:e.root},oe&&r.a.createElement(me.a,{container:!0,className:e.root,spacing:2},r.a.createElement(me.a,{item:!0,xs:3}),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement("div",null,r.a.createElement(Ce.a,{className:e.backdrop,open:Y},r.a.createElement(Ne.a,{color:"inherit"}))),r.a.createElement(Se.a,{className:e.control},r.a.createElement("div",null,Z&&r.a.createElement(U.a,{severity:"error"},ne.map((function(e,t){return r.a.createElement("div",{key:t},e)}))),_e&&r.a.createElement(U.a,{severity:"success"},Oe)),r.a.createElement("h1",{style:{color:Be}},"Sign Up"),r.a.createElement(C.a,null),r.a.createElement("p",null,"Create an Account to get a bird's eye view of patients accross countries"),r.a.createElement(C.a,null),r.a.createElement("form",null,r.a.createElement(me.a,{container:!0,style:{marginTop:10,marginBottom:20},spacing:2},r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(de.a,{required:!0,fullWidth:!0,className:Object(m.a)(e.margin,e.textField),id:"outlined-basic",label:"First name",variant:"outlined",value:i,onChange:function(e){return o(e.target.value)}})),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(de.a,{required:!0,fullWidth:!0,className:Object(m.a)(e.margin,e.textField),id:"outlined-basic",label:"Last name",variant:"outlined",value:b,onChange:function(e){return h(e.target.value)}}))),r.a.createElement(de.a,{style:{marginTop:0,marginBottom:10},helperText:"We'll never share your email",required:!0,fullWidth:!0,className:Object(m.a)(e.margin,e.textField),id:"outlined-basic",label:"Email",variant:"outlined",value:B,onChange:function(e){return A(e.target.value)}}),r.a.createElement(me.a,{container:!0,style:{marginTop:0,marginBottom:20},spacing:2},r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(ze.a,{value:w,onChange:function(e,t){return _(t)},id:"combo-box-country",options:E,style:{width:"100%"},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,Object.assign({d:"outlined-basic",label:"Country",variant:"outlined"},e))}})),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(ze.a,{value:T,onChange:function(e,t){return I(t)},id:"combo-box-city",options:S,style:{width:"100%"},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,Object.assign({d:"outlined-basic",label:"City",variant:"outlined"},e))}}))),r.a.createElement(me.a,{container:!0,spacing:2},r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(ge.a,{style:{marginBottom:30},fullWidth:!0,className:Object(m.a)(e.margin,e.textField),variant:"outlined"},r.a.createElement(pe.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(fe.a,{id:"outlined-adornment-password",type:Te.showPassword?"text":"password",value:F,onChange:function(e){return W(e.target.value)},required:!0,endAdornment:r.a.createElement(be.a,{position:"end"},r.a.createElement(p.a,{"aria-label":"toggle password visibility",onClick:function(){Ie(Object(u.a)(Object(u.a)({},Te),{},{showPassword:!Te.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end"},Te.showPassword?r.a.createElement(Ee.a,null):r.a.createElement(ye.a,null))),labelWidth:70}))),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(ge.a,{style:{marginBottom:30},fullWidth:!0,className:Object(m.a)(e.margin,e.textField),variant:"outlined"},r.a.createElement(pe.a,{htmlFor:"outlined-adornment-password"},"Re-password"),r.a.createElement(fe.a,{id:"outlined-adornment-password",type:Fe.showPassword?"text":"password",value:H,onChange:function(e){return $(e.target.value)},required:!0,endAdornment:r.a.createElement(be.a,{position:"end"},r.a.createElement(p.a,{"aria-label":"toggle password visibility",onClick:function(){We(Object(u.a)(Object(u.a)({},Fe),{},{showPassword:!Fe.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end"},Fe.showPassword?r.a.createElement(Ee.a,null):r.a.createElement(ye.a,null))),labelWidth:100})))),r.a.createElement("p",{style:{marginBottom:20}},"By clicking Sign In, you agree to our Terms of Use and our Privacy Policy."),r.a.createElement(le.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),V(!0);var t=[];if((void 0==i||i.length<2||""==i)&&t.push("Please enter first name"),(void 0==b||b.length<2||""==b)&&t.push("Please enter last name"),void 0!=w&&""!=w||t.push("Please select your country"),void 0!=T&&""!=T||t.push("Please select your city"),""!==B&&0!=function(e){return/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]))$/.test(String(e).toLowerCase())}(B)||t.push("Please enter a valid email"),void 0==F&&""==F||void 0==H&&""==H?t.push("Password fields cannot be blank"):H===F?((F.length<8||H.length<8)&&t.push("Passwords length must be at least 8 characters"),/\s/.test(F)&&t.push("Passwords cannot containe whitespace(s)")):t.push("Passwords MUST match"),t.length<1){var a={name:{first_name:i,last_name:b},contact:{email:B,country:w,city:T},password:F,activated:!1,created_at:new Date,updated_at:new Date};Ae.post("/healthworkers/signup",a,Le()).then((function(e){setTimeout((function(){V(!1),xe(!0),ee(!1),je("Congratulations!!! Your account is successfully created and we have sent you an email. Please note that it we'll need to confirm that you are a health official before Activating your account")}),500)})).catch((function(e){ee(!0),xe(!1),V(!1),e.response&&"Mail exists"==e.response.data.message?re(["Account with this email already exist! Please choose another email or recover account (if you have forgotten your password)"]):re(["Error creating account. Please try again later or contact Admin if error persists"])}))}else re(t),ee(!0),V(!1)}},"Sign Up"),r.a.createElement("p",{style:{marginBottom:20,fontWeight:"bold"}},"Forgot your password?"),r.a.createElement("p",{onClick:function(){return console.log("what")},style:{marginBottom:30,fontSize:"medium",fontWeight:"bold"}},r.a.createElement(Pe.a,{href:"#",onClick:function(){return t.push("/login")}},"Already have an account? Login here!"))))),r.a.createElement(me.a,{item:!0,xs:3})))},Fe=a(50),We=a(25),Ge=Object(y.a)((function(e){return{root:{margin:e.spacing(10)}}}));var Je=function(e){var t=e.patients,a=(Ge(),["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);return r.a.createElement("div",{style:{width:"95%",height:300}},r.a.createElement(We.l,null,r.a.createElement(We.c,{width:700,height:250,data:t},r.a.createElement(We.e,{strokeDasharray:"3 3"}),r.a.createElement(We.n,{dataKey:"country"},r.a.createElement(We.h,{value:"Countries",offset:-0,position:"insideBottom"})),r.a.createElement(We.o,{label:{value:"No of patients",angle:-90,position:"center"}}),r.a.createElement(We.m,null),r.a.createElement(We.k,{y:0,stroke:"#000"}),t.length>0&&r.a.createElement(We.d,{dataKey:"country",height:15,stroke:"#ff7f0e"}),r.a.createElement(We.b,{dataKey:"patient",fill:"#8884d8"},t.map((function(e,t){return r.a.createElement(We.f,{key:t,fill:a[t%20]})}))))))},He=Object(y.a)((function(e){return{root:{margin:e.spacing(10)}}}));var $e=function(e){var t=e.healthworkers;return He(),r.a.createElement("div",{style:{width:"95%",height:335}},r.a.createElement(We.l,null,r.a.createElement(We.g,{width:700,height:250,data:t,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(We.e,{stroke:"#f5f5f5"}),r.a.createElement(We.n,{dataKey:"country"},r.a.createElement(We.h,{value:"Countries",offset:-0,position:"insideBottomRight"})),r.a.createElement(We.o,{label:{value:"No of patients",angle:-90,position:"center"}}),r.a.createElement(We.m,null),r.a.createElement(We.i,null),r.a.createElement(We.k,{y:0,stroke:"#000"}),t.length>0&&r.a.createElement(We.d,{dataKey:"country",height:15,stroke:"#8c564b"}),r.a.createElement(We.j,{type:"monotone",dataKey:"patient",stroke:"#ff7300",strokeWidth:2}),r.a.createElement(We.b,{dataKey:"healthworker",fill:"#8884d8"}))))},Ke=Object(y.a)((function(e){return{root:{margin:e.spacing(10)}}}));var qe=function(e){var t=e.cities,a=(Ke(),["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);return r.a.createElement("div",{style:{width:"95%",height:300}},r.a.createElement(We.l,null,r.a.createElement(We.g,{width:700,height:250,data:t,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(We.e,{stroke:"#f5f5f5"}),r.a.createElement(We.n,{dataKey:"city"},r.a.createElement(We.h,{value:"Cities",offset:-0,position:"insideBottomRight"})),r.a.createElement(We.o,{label:{value:"No of patients",angle:-90,position:"center"}}),r.a.createElement(We.m,null),r.a.createElement(We.k,{y:0,stroke:"#000"}),t.length>0&&r.a.createElement(We.d,{dataKey:"city",height:30,stroke:"#8884d8"}),r.a.createElement(We.a,{type:"monotone",dataKey:"patient",fill:a[1],stroke:a[3]}))))},Ye=a(601),Ve=we.a.create({baseURL:"http://localhost:3000/api"});function Qe(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var Xe=Object(y.a)((function(e){return{root:{}}}));var Ze=function(e){e.match;var t=Xe(),a=Object(n.useState)([]),c=Object(s.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)([]),u=Object(s.a)(l,2),d=u[0],m=u[1],f=Object(n.useState)([]),p=Object(s.a)(f,2),b=p[0],h=p[1],g=Object(n.useState)("Nigeria"),O=Object(s.a)(g,2),E=O[0],j=O[1],y=Object(n.useState)([]),v=Object(s.a)(y,2),w=v[0],_=v[1],x=Object(n.useState)(!1),k=Object(s.a)(x,2),S=k[0],N=k[1],P=Object(n.useState)([]),R=Object(s.a)(P,2),T=R[0],I=R[1],D=Object(n.useState)(!1),z=Object(s.a)(D,2),B=z[0],A=z[1],L=Object(n.useState)(!1),M=Object(s.a)(L,2),F=(M[0],M[1]);return Object(n.useEffect)((function(){F(!0);var e=[],t=[];Ve.get("/countries/"+E).then((function(t){return e=t.data.cities,Ve.get("patients/countries/"+E,Qe())})).then((function(a){for(var n=a.data.patients,r=new Map(Object(Fe.a)(new Set(n)).map((function(e){return[e,n.filter((function(t){return t===e})).length]}))),c=0;c<e.length;c++){var i=e[c],o=r.get(e[c]);void 0===o&&(o=0);var l={city:i,patient:o};t.push(l)}_(t),setTimeout((function(){N(!1),I([]),F(!1)}),100)})).catch((function(e){N(!0),I(["Could not load data. Try again later and contact admin if problem persist"]),F(!1)}))}),[E]),Object(n.useEffect)((function(){A(!0);var e=[],t=[],a=[],n=[],r=[];Ve.get("/countries",Qe()).then((function(t){return h(t.data),j(t.data[0].name),t.data.forEach((function(t){e.push(t.name)})),Ve.get("/patients",Qe())})).then((function(e){return e.data.patients.forEach((function(e){t.push(e.contact.country)})),Ve.get("/healthworkers",Qe())})).then((function(c){for(var i=new Map(Object(Fe.a)(new Set(t)).map((function(e){return[e,t.filter((function(t){return t===e})).length]}))),l=0;l<e.length;l++){var s=e[l],u=i.get(e[l]);void 0===u&&(u=0);var d={country:s,patient:u};n.push(d)}o(n),c.data.healthworkers.forEach((function(e){a.push(e.contact.country)}));var f=new Map(Object(Fe.a)(new Set(a)).map((function(e){return[e,a.filter((function(t){return t===e})).length]})));r=[].concat(n);for(var p=0;p<e.length;p++){var b=f.get(e[p]);void 0===b&&(b=0),r[p].healthworker=b}m(r),setTimeout((function(){A(!1),N(!1),I([])}),500)})).catch((function(e){A(!1),N(!0),I(["Could not load data. Try again later and contact admin if problem persist"])}))}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(Ce.a,{className:t.backdrop,open:B},r.a.createElement(Ne.a,{color:"inherit"})),r.a.createElement("div",null,S&&r.a.createElement(U.a,{severity:"error"},T.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement(me.a,{container:!0,className:t.root,spacing:2},r.a.createElement(me.a,{item:!0,xs:6},!B&&r.a.createElement(Je,{patients:i})),r.a.createElement(me.a,{item:!0,xs:6},!B&&r.a.createElement($e,{healthworkers:d}))),r.a.createElement(C.a,{style:{margin:20}}),r.a.createElement(me.a,{container:!0,className:t.root,spacing:2},r.a.createElement(me.a,{item:!0,xs:12},!B&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Ye.a,{style:{width:200},value:E,onChange:function(e){return j(e.target.value)}},b.map((function(e){return r.a.createElement("option",{key:e._id,value:e.name},e.name)}))),r.a.createElement(qe,{cities:w})))))},et=a(94),tt=a.n(et),at=a(105),nt=a.n(at),rt=a(113),ct=a.n(rt),it=a(106),ot=a.n(it),lt=a(58),st=a.n(lt),ut=a(107),dt=a.n(ut),mt=a(108),ft=a.n(mt),pt=a(110),bt=a.n(pt),ht=a(111),gt=a.n(ht),Ot=a(112),Et=a.n(Ot),jt=a(114),yt=a.n(jt),vt=a(109),wt=a.n(vt),_t=a(82),xt=a.n(_t),kt=a(115),St=a.n(kt),Ct=a(426),Nt=a(544),Pt=a(83),Rt=a(32),Tt=a(389),It={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Et.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},Dt=we.a.create({baseURL:"http://localhost:3000/api"});function zt(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var Bt=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var At=function(e){var t=e.match,a=Bt(),c=Object(n.useState)(""),i=Object(s.a)(c,2),o=i[0],u=i[1],d=Object(n.useState)(""),m=Object(s.a)(d,2),f=m[0],p=m[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),g=h[0],O=h[1],E=Object(n.useState)(""),j=Object(s.a)(E,2),y=j[0],v=j[1],w=Object(n.useState)([]),_=Object(s.a)(w,2),x=_[0],k=_[1],S=Object(n.useState)([]),C=Object(s.a)(S,2),N=C[0],P=C[1],R=Object(n.useState)([]),T=Object(s.a)(R,2),I=T[0],D=T[1],z=Object(n.useState)(new Date("1987-08-18T21:11:54")),B=Object(s.a)(z,2),A=B[0],L=B[1],M=Object(n.useState)(!1),U=Object(s.a)(M,2),F=U[0],W=U[1],G=(Object(l.f)(),[{title:"id",field:"id",hidden:!0},{title:"First name",field:"fname"},{title:"Last name",field:"lname"},{title:"Gender",field:"gender",lookup:{male:"male",female:"female",other:"other"}},{title:"Date-of-birth",field:"dob",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:A,onChange:ee,variant:"inline"}))}},{title:"Email",field:"email"},{title:"Phone",field:"phone",type:"numeric"},{title:"Country",field:"country",editComponent:function(){return r.a.createElement(Ct.a,{value:y,onChange:function(e){return v(e.target.value)}},N.map((function(e){return r.a.createElement(Nt.a,{key:e._id,value:e.name},e.name)})))}},{title:"City",field:"city",editComponent:function(){return r.a.createElement(ze.a,{value:g,onChange:function(e,t){return O(t)},id:"combo-box-hw-city",options:x,style:{width:150},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}}]),J=Object(n.useState)(!1),H=Object(s.a)(J,2),$=(H[0],H[1]),K=Object(n.useState)([]),q=Object(s.a)(K,2),Y=(q[0],q[1]),V=Object(n.useState)(!1),Q=Object(s.a)(V,2),X=Q[0],Z=Q[1],ee=function(e){L(e)};Object(n.useEffect)((function(){u(t.params.id);var e=t.params.id,a=JSON.parse(window.localStorage.getItem("login")).id;W(e===a)}),[F]),Object(n.useEffect)((function(){Z(!0),Dt.get("/healthworkers/"+t.params.id,zt()).then((function(e){p(e.data.name.first_name);var t=e.data,a=[];a.push({id:t._id,fname:t.name.first_name,lname:t.name.last_name,gender:t.gender,dob:t.DOB,email:t.contact.email,phone:t.contact.phone,city:t.contact.city,country:t.contact.country}),setTimeout((function(){D(a),$(!1),Y([]),Z(!1)}),500)})).catch((function(e){$(!0),Y(["Could not load profile data. Try again later and contact admin if problem persist"]),Z(!1)}))}),[]);var te=function(e,t,a){var n,r=[];""==e.fname&&r.push("Please enter first name"),""==e.lname&&r.push("Please enter last name"),""!=e.email&&0==(n=e.email,/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]))$/.test(String(n).toLowerCase()))&&r.push("Please enter a valid email");var c="",i="";if(""==y?(v(t.country),c=t.country):c=y,""==g?(O(t.city),i=t.city):i=g,r.length<1){var l=[{propName:"name.first_name",value:e.fname},{propName:"name.last_name",value:e.lname},{propName:"gender",value:e.gender},{propName:"DOB",value:A},{propName:"contact.city",value:i},{propName:"contact.country",value:c},{propName:"contact.phone",value:e.phone},{propName:"contact.email",value:e.email},{propName:"updated_at",value:new Date}];Dt.patch("/healthworkers/"+o,l,zt()).then((function(e){var n=JSON.parse(localStorage.login);n.fname=e.data.updatedHealthworker.name.first_name,n.lname=e.data.updatedHealthworker.name.last_name,localStorage.setItem("login",JSON.stringify(n)),p(e.data.updatedHealthworker.name.first_name);var r=e.data.updatedHealthworker,c={id:r._id,fname:r.name.first_name,lname:r.name.last_name,gender:r.gender,dob:r.DOB,email:r.contact.email,phone:r.contact.phone,city:r.contact.city,country:r.contact.country},i=Object(Fe.a)(I);i[I.indexOf(t)]=c,console.log("I dey here"),D(i),Y([]),$(!1),setTimeout((function(){a()}),500)})).catch((function(e){$(!0),Y(["Could not update profile. Try again later and contact admin if problem persist"]),a()}))}else Y(r),$(!0),a()};return Object(n.useEffect)((function(){Dt.get("/countries",zt()).then((function(e){P(e.data),$(!1),Y([])})).catch((function(e){$(!0),Y(["Could not load countries. Try again later and contact admin if problem persist"])}))}),[]),Object(n.useEffect)((function(){Z(!0),y&&Dt.get("/countries/"+y).then((function(e){k(e.data.cities),e.data.cities.includes(g)||O(e.data.cities[0]),$(!1),Y([]),setTimeout((function(){Z(!1)}),500)})).catch((function(e){$(!0),Y(["Could not load cities. Try again later and contact admin if problem persist"]),Z(!1)}))}),[y]),r.a.createElement("div",{className:a.root},r.a.createElement(Ce.a,{className:a.backdrop,open:X},r.a.createElement(Ne.a,{color:"inherit"})),F?r.a.createElement("div",null,!X&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},function(){var e=(new Date).getHours();return e<12?"Good morning":e>12&&e<16?"Good afternoon":"Good evening"}()," ",", "+f),r.a.createElement(tt.a,{options:{search:!1,paging:!1},title:"Profile",icons:It,columns:G,data:I,editable:{onRowUpdate:function(e,t){return new Promise((function(a){te(e,t,a)}))}},components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}}))}}})):r.a.createElement("div",null,!X&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}}," ",f+", Bio"),r.a.createElement(tt.a,{options:{search:!1,paging:!1},title:"Profile",icons:It,columns:G,data:I,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}}))}}})))},Lt=a(985),Mt=a(556),Ut=a(553),Ft=a(549),Wt=a(543),Gt=a(548),Jt=a(599),Ht=a(393),$t=a(632),Kt=we.a.create({baseURL:"http://localhost:3000/api"});function qt(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var Yt=["Name","Gender","Email","Phone","City","Country"],Vt=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},container:{maxHeight:440},input:{marginLeft:e.spacing(1),flex:1,width:200},iconButton:{padding:10},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Qt=function(){var e=Vt(),t=(Object(l.f)(),Object(n.useState)([])),a=Object(s.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)([]),u=Object(s.a)(o,2),d=u[0],m=u[1],f=Object(n.useState)(0),b=Object(s.a)(f,2),g=b[0],O=b[1],E=Object(n.useState)(10),j=Object(s.a)(E,2),y=j[0],v=j[1],w=Object(n.useState)(!1),_=Object(s.a)(w,2),x=_[0],k=_[1],S=Object(n.useState)([]),N=Object(s.a)(S,2),P=N[0],R=N[1],T=Object(n.useState)(""),I=Object(s.a)(T,2),D=(I[0],I[1],Object(n.useState)(!1)),z=Object(s.a)(D,2),B=z[0],A=z[1];return Object(n.useEffect)((function(){A(!0),Kt.get("/healthworkers",qt()).then((function(e){setTimeout((function(){i(e.data.healthworkers),m(e.data.healthworkers),A(!1)}),500)})).catch((function(e){setTimeout((function(){k(!0),R("Cannot retrieve list of health officials. Try again later and contact admin if problem persist!"),A(!1)}),50)}))}),[]),r.a.createElement("div",{className:e.root},!B&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},"Health officials"),r.a.createElement("div",null,x&&r.a.createElement(U.a,{severity:"error"},P.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement(Ce.a,{className:e.backdrop,open:B},r.a.createElement(Ne.a,{color:"inherit"})),r.a.createElement(me.a,{container:!0,alignItems:"flex-start",justify:"flex-end",direction:"row"},r.a.createElement("div",{component:"form",className:e.searchDiv},r.a.createElement(p.a,{className:e.iconButton,"aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement($t.a,{className:e.input,placeholder:"Search Doctors",inputProps:{"aria-label":"search doctors"},onChange:function(e){var t=e.target.value;""===t?m(c):Kt.get("/healthworkers/filter/"+t,qt()).then((function(e){var t=e.data.healthworkers;m(void 0!==t?e.data.healthworkers:[])})).catch((function(e){console.log("Cannot fetch data")}))}}),r.a.createElement(p.a,{type:"submit",className:e.iconButton,"aria-label":"search"},r.a.createElement(xt.a,null)),r.a.createElement(C.a,{className:e.divider,orientation:"vertical"}))),r.a.createElement(Se.a,null,r.a.createElement(Lt.a,{className:e.container},r.a.createElement(Mt.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(Ut.a,null,r.a.createElement(Ft.a,null,Yt.map((function(e,t){return 0==t?r.a.createElement(Wt.a,{key:t,align:"left",style:{minWidth:200}},r.a.createElement(Ht.a,{fontWeight:"fontWeightBold",m:1},e)):r.a.createElement(Wt.a,{key:t,align:"left",style:{minWidth:170}},r.a.createElement(Ht.a,{fontWeight:"fontWeightBold",m:1},e))})))),r.a.createElement(Gt.a,null,d.slice(g*y,g*y+y).map((function(e){return r.a.createElement(Ft.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e._id},r.a.createElement(Wt.a,{style:{minWidth:200},align:"left"},r.a.createElement(M.a,{maxInitials:1,size:40,round:!0,name:e.name.first_name}),"   "+e.name.first_name+" "+e.name.last_name),r.a.createElement(Wt.a,{align:"left"},e.gender),r.a.createElement(Wt.a,{align:"left"},e.contact.email),r.a.createElement(Wt.a,{align:"left"},e.contact.phone),r.a.createElement(Wt.a,{align:"left"},e.contact.city),r.a.createElement(Wt.a,{align:"left"},e.contact.country))}))))),r.a.createElement(Jt.a,{rowsPerPageOptions:[2,10,20],component:"div",count:d.length,rowsPerPage:y,page:g,onChangePage:function(e,t){O(t)},onChangeRowsPerPage:function(e){v(+e.target.value),O(0)}})))},Xt=(we.a.create({baseURL:"http://localhost:3000/api"}),function(e,t){switch(t.type){case"GET_NUM_METRICS":return Object(u.a)(Object(u.a)({},e),{},{num_metrics:t.count});case"GET_NUM_SYMPTOMS":return Object(u.a)(Object(u.a)({},e),{},{num_symptoms:t.count});case"GET_NUM_DIAGNOSTICS":return Object(u.a)(Object(u.a)({},e),{},{num_diagnostics:t.count});default:return e}}),Zt=Object(n.createContext)(),ea=function(e){var t=Object(n.useReducer)(Xt,{num_metrics:0,num_symptoms:0,num_diagnostics:0}),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement(Zt.Provider,{value:{patientData:c,dispatchPatient:i}},e.children)},ta=ue.a[500],aa={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Et.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},na=we.a.create({baseURL:"http://localhost:3000/api"});function ra(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}function ca(e){return/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]))$/.test(String(e).toLowerCase())}var ia=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var oa=function(){var e=ia(),t=Object(l.f)(),a=Object(n.useContext)(Zt).dispatchPatient,c=Object(n.useState)([]),i=Object(s.a)(c,2),o=(i[0],i[1]),u=Object(n.useState)([]),d=Object(s.a)(u,2),m=(d[0],d[1]),f=Object(n.useState)(""),p=Object(s.a)(f,2),b=(p[0],p[1]),h=Object(n.useState)(""),g=Object(s.a)(h,2),O=(g[0],g[1]),E=Object(n.useState)(""),j=Object(s.a)(E,2),y=j[0],v=j[1],w=Object(n.useState)(""),_=Object(s.a)(w,2),x=_[0],k=_[1],S=Object(n.useState)([]),C=Object(s.a)(S,2),N=C[0],P=C[1],R=Object(n.useState)([]),T=Object(s.a)(R,2),I=T[0],D=T[1],z=Object(n.useState)([]),B=Object(s.a)(z,2),A=B[0],L=B[1],F=Object(n.useState)(new Date("1987-08-18T21:11:54")),W=Object(s.a)(F,2),G=W[0],J=W[1],H=Object(n.useContext)(xe).healthworker,$=[{title:"",render:function(e){return r.a.createElement(M.a,{maxInitials:1,size:40,round:!0,name:void 0==e?" ":e.fname})}},{title:"id",field:"id",hidden:!0},{title:"First name",field:"fname"},{title:"Last name",field:"lname"},{title:"Gender",field:"gender",lookup:{male:"male",female:"female",other:"other"}},{title:"Date-of-birth",field:"dob",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:G,onChange:ce,variant:"inline"}))}},{title:"Email",field:"email"},{title:"Phone",field:"phone",type:"numeric"},{title:"Country",field:"country",editComponent:function(){return r.a.createElement(Ct.a,{value:x,onChange:function(e){return k(e.target.value)}},I.map((function(e){return r.a.createElement(Nt.a,{key:e._id,value:e.name},e.name)})))}},{title:"City",field:"city",editComponent:function(){return r.a.createElement(ze.a,{value:y,onChange:function(e,t){return v(t)},id:"combo-box-demo",options:N,style:{width:200},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}}],K=Object(n.useState)(!1),q=Object(s.a)(K,2),Y=q[0],V=q[1],Q=Object(n.useState)([]),X=Object(s.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],ce=function(e){J(e)};return Object(n.useEffect)((function(){na.get("/countries",ra()).then((function(e){D(e.data),V(!1),ee([])})).catch((function(e){V(!0),ee(["Could not load countries. Try again later and contact admin if problem persist"])}))}),[]),Object(n.useEffect)((function(){re(!0),x&&na.get("/countries/"+x).then((function(e){P(e.data.cities.sort()),e.data.cities.includes(y)||v(e.data.cities[0]),V(!1),ee([]),setTimeout((function(){re(!1)}),100)})).catch((function(e){V(!0),ee(["Could not load cities. Try again later and contact admin if problem persist"]),re(!1)}))}),[x]),Object(n.useEffect)((function(){re(!0),na.get("/patients",ra()).then((function(e){o(e.data.patients),m(e.data.patients),b(function(){var e=JSON.parse(window.localStorage.getItem("login"));return e?e.fname:null}()+" "+function(){var e=JSON.parse(window.localStorage.getItem("login"));return e?e.lname:null}()),O(function(){var e=JSON.parse(window.localStorage.getItem("login"));return e?e.id:null}());var t=[];e.data.patients.forEach((function(e){t.push({id:e._id,fname:e.name.first_name,lname:e.name.last_name,gender:e.gender,dob:e.DOB,email:e.contact.email,phone:e.contact.phone,city:e.contact.city,country:e.contact.country})})),setTimeout((function(){L(t),V(!1),ee([]),re(!1)}),500)})).catch((function(e){setTimeout((function(){V(!0),ee(["Could not load patients. Try again later and contact admin if problem persist"]),re(!1)}),50)}))}),[]),r.a.createElement("div",{className:e.root},!ne&&r.a.createElement("h1",{style:{color:ta}},"Patients"),r.a.createElement(Ce.a,{className:e.backdrop,open:ne},r.a.createElement(Ne.a,{color:"inherit"})),r.a.createElement("div",null,Y&&r.a.createElement(U.a,{severity:"error"},Z.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement("div",null,r.a.createElement(tt.a,{actions:[{icon:function(){return r.a.createElement(Ee.a,{className:e.icon_color})},tooltip:"Click to view/add more details",onClick:function(e,n){!function(e){na.get("/metrics/number/"+e).then((function(e){var t=e.data.count;a({type:"GET_NUM_METRICS",count:t})})).catch((function(e){a({type:"GET_NUM_METRICS",count:0})})),na.get("/patient_symptoms/number/"+e).then((function(e){var t=e.data.count;a({type:"GET_NUM_SYMPTOMS",count:t})})).catch((function(e){a({type:"GET_NUM_SYMPTOMS",count:0})})),na.get("/patient_diagnostics/number/"+e).then((function(e){var t=e.data.count;a({type:"GET_NUM_DIAGNOSTICS",count:t})})).catch((function(e){a({type:"GET_NUM_DIAGNOSTICS",count:0})})),t.push("/patients/biodata/"+e)}(n.id)}}],title:"",icons:aa,columns:$,data:A,editable:{onRowAdd:function(e){return new Promise((function(t,a){!function(e,t,a){var n=[];if(void 0==e.fname&&n.push("Please enter first name"),void 0==e.lname&&n.push("Please enter last name"),""==x&&n.push("Please select country"),""==y&&n.push("Please select city"),void 0==e.gender&&n.push("Please select gender"),""!=e.email&&0==ca(e.email)&&n.push("Please enter a valid email"),n.length<1){var r={name:{first_name:e.fname,last_name:e.lname},DOB:G,gender:e.gender,contact:{email:e.email,phone:e.phone,city:y,country:x},created_by:H.id,created_at:new Date,updated_by:H.id,updated_at:new Date};na.post("/patients",r,ra()).then((function(e){var a=e.data.createdPatient,n={id:a._id,fname:a.name.first_name,lname:a.name.last_name,gender:a.gender,dob:a.DOB,email:a.contact.email,phone:a.contact.phone,city:a.contact.city,country:a.contact.country},r=Object(Fe.a)(A);r.push(n),L(r),ee([]),V(!1),setTimeout((function(){t()}),500)})).catch((function(e){e.response&&"Email exists"===e.response.data.message?ee(["Email already exist. Please choose another valid email address!"]):ee(["Error adding patient! Please try again later. If problem persist, contact admin"]),V(!0),a()}))}else ee(n),V(!0),a()}(e,t,a)}))},onRowUpdate:function(e,t){return new Promise((function(a,n){!function(e,t,a,n){var r=[];if(""==e.fname&&r.push("Please enter first name"),""==e.lname&&r.push("Please enter last name"),""!=e.email&&0==ca(e.email)&&r.push("Please enter a valid email"),r.length<1){var c=[{propName:"name.first_name",value:e.fname},{propName:"name.last_name",value:e.lname},{propName:"gender",value:e.gender},{propName:"DOB",value:G},{propName:"contact.email",value:e.email},{propName:"contact.city",value:y||t.city},{propName:"contact.country",value:x||t.country},{propName:"contact.phone",value:e.phone},{propName:"updated_at",value:new Date},{propName:"updated_by",value:H.id}],i=e.id;na.patch("/patients/"+i,c,ra()).then((function(e){var n=e.data.updatedPatient,r={id:n._id,fname:n.name.first_name,lname:n.name.last_name,gender:n.gender,dob:n.DOB,email:n.contact.email,phone:n.contact.phone,city:n.contact.city,country:n.contact.country},c=Object(Fe.a)(A);c[A.indexOf(t)]=r,L(c),ee([]),V(!1),setTimeout((function(){a()}),500)})).catch((function(e){V(!0),ee(["Update failed. Please try again later. If problem persist contact admin"]),n()}))}else ee(r),V(!0),n()}(e,t,a,n)}))}}})))},la={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Et.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},sa=we.a.create({baseURL:"http://localhost:3000/api"});function ua(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var da=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var ma=function(e){var t=e.match,a=da(),c=(Object(l.f)(),Object(n.useContext)(xe).healthworker),i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],m=Object(n.useState)(""),f=Object(s.a)(m,2),p=f[0],b=f[1],h=Object(n.useState)([]),g=Object(s.a)(h,2),O=g[0],E=g[1],j=Object(n.useState)([]),y=Object(s.a)(j,2),v=y[0],w=y[1],_=Object(n.useState)([]),x=Object(s.a)(_,2),k=x[0],S=x[1],C=Object(n.useState)(new Date("1987-08-18T21:11:54")),N=Object(s.a)(C,2),P=N[0],R=N[1],T=(Object(l.g)(),Object(n.useState)({})),I=Object(s.a)(T,2),D=I[0],z=I[1],B=[{title:"id",field:"id",hidden:!0},{title:"First name",field:"fname"},{title:"Last name",field:"lname"},{title:"Gender",field:"gender",lookup:{male:"male",female:"female",other:"other"}},{title:"Date-of-birth",field:"dob",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:P,onChange:V,variant:"inline"}))}},{title:"Email",field:"email"},{title:"Phone",field:"phone",type:"numeric"},{title:"Country",field:"country",editComponent:function(){return r.a.createElement(Ct.a,{value:p,onChange:function(e){return b(e.target.value)}},v.map((function(e){return r.a.createElement(Nt.a,{key:e._id,value:e.name},e.name)})))}},{title:"City",field:"city",editComponent:function(){return r.a.createElement(ze.a,{value:u,onChange:function(e,t){return d(t)},id:"combo-box-demo",options:O,style:{width:200},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}}],A=Object(n.useState)(!1),L=Object(s.a)(A,2),M=L[0],F=L[1],W=Object(n.useState)([]),G=Object(s.a)(W,2),J=G[0],H=G[1],$=Object(n.useState)(!1),K=Object(s.a)($,2),q=K[0],Y=K[1],V=function(e){R(e)};Object(n.useEffect)((function(){sa.get("/countries",ua()).then((function(e){w(e.data),F(!1),H([])})).catch((function(e){F(!0),H(["Could not load countries. Try again later and contact admin if problem persist"])}))}),[]),Object(n.useEffect)((function(){Y(!0),p&&sa.get("/countries/"+p).then((function(e){E(e.data.cities.sort()),e.data.cities.includes(u)||d(e.data.cities[0]),F(!1),H([]),setTimeout((function(){Y(!1)}),100)})).catch((function(e){F(!0),H(["Could not load cities. Try again later and contact admin if problem persist"]),Y(!1)}))}),[p]),Object(n.useEffect)((function(){Y(!0),sa.get("/patients/"+t.params.id,ua()).then((function(e){var t=e.data.patient;z(t.name);var a=[];a.push({id:t._id,fname:t.name.first_name,lname:t.name.last_name,gender:t.gender,dob:t.DOB,email:t.contact.email,phone:t.contact.phone,city:t.contact.city,country:t.contact.country}),setTimeout((function(){S(a),F(!1),H([]),Y(!1)}),500)})).catch((function(e){F(!0),H(["Could not load patients. Try again later and contact admin if problem persist"]),Y(!1)}))}),[]);var Q=function(e,t,a,n){var r,i=[];""==e.fname&&i.push("Please enter first name"),""==e.lname&&i.push("Please enter last name"),""!=e.email&&0==(r=e.email,/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]))$/.test(String(r).toLowerCase()))&&i.push("Please enter a valid email");var o="",l="";if(""==p?(b(t.country),o=t.country):o=p,""==u?(d(t.city),l=t.city):l=u,i.length<1){var s=[{propName:"name.first_name",value:e.fname},{propName:"name.last_name",value:e.lname},{propName:"gender",value:e.gender},{propName:"DOB",value:P},{propName:"contact.email",value:e.email},{propName:"contact.city",value:l},{propName:"contact.country",value:o},{propName:"contact.phone",value:e.phone},{propName:"updated_at",value:new Date},{propName:"updated_by",value:c.id}],m=e.id;sa.patch("/patients/"+m,s,ua()).then((function(e){z(e.data.updatedPatient.name);var n=e.data.updatedPatient,r={id:n._id,fname:n.name.first_name,lname:n.name.last_name,gender:n.gender,dob:n.DOB,email:n.contact.email,phone:n.contact.phone,city:n.contact.city,country:n.contact.country},c=Object(Fe.a)(k);c[k.indexOf(t)]=r,S(c),H([]),F(!1),setTimeout((function(){a()}),500)})).catch((function(e){F(!0),H(["Update failed. Please try again later. If problem persist contact admin"]),n()}))}else H(i),F(!0),n()};return r.a.createElement("div",{className:a.root},r.a.createElement(Ce.a,{className:a.backdrop,open:q},r.a.createElement(Ne.a,{color:"inherit"})),!q&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},D.first_name+"'s Biodata"),r.a.createElement("div",null,M&&r.a.createElement(U.a,{severity:"error"},J.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement("div",null,r.a.createElement(tt.a,{options:{search:!1,paging:!1},title:"",icons:la,columns:B,data:k,editable:{onRowUpdate:function(e,t){return new Promise((function(a,n){Q(e,t,a,n)}))}}})))},fa=we.a.create({baseURL:"http://localhost:3000/api"});function pa(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var ba=function(e){return(Math.round(100*e)/100).toFixed(2)},ha=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var ga=function(e){var t=e.match,a=ha(),c=Object(l.f)(),i=Object(n.useContext)(xe).healthworker,o={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Et.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},u=[{title:"id",field:"id",hidden:!0},{title:"Height (cm)",field:"height",type:"numeric"},{title:"Weight (kg)",field:"weight",type:"numeric"},{title:"BMI",field:"bmi",editable:"never"},{title:"Weight status",field:"weight_status",editable:"never"},{title:"Prenant",field:"pregnant",lookup:{yes:"yes",no:"no","N/A":"N/A"}},{title:"Blood group",field:"blood_group",lookup:{"A+":"A+","A-":"A-","B+":"B+","B-":"B-","AB+":"AB+","AB-":"AB-","O+":"O+","O-":"O-"}},{title:"Smoking",field:"smoking",lookup:{yes:"yes",no:"no"}},{title:"Drinking alcohol",field:"drinking_alcohol",lookup:{yes:"yes",no:"no"}},{title:"Comorbidity",field:"comorbidity",lookup:{yes:"yes",no:"no"}},{title:"Comorbidity details",field:"cormorbidity_details"},{title:"Testing indication",field:"testing_indication",lookup:{yes:"yes",no:"no"}},{title:"Created by",field:"created_by",hidden:!0},{title:"Updated by",field:"updated_by",hidden:!0},{title:"Created at",field:"created_at",editable:"never",render:function(e){return r.a.createElement(Pe.a,{component:"button",variant:"body2",onClick:function(){return c.push("/profile/"+e.created_by)}},void 0==e?" ":e.created_at)}},{title:"Updated at",field:"updated_at",editable:"never",render:function(e){return r.a.createElement(Pe.a,{component:"button",variant:"body2",onClick:function(){return c.push("/profile/"+e.updated_by)},href:"#"},void 0==e?" ":e.updated_at)}}],d=Object(n.useState)([]),m=Object(s.a)(d,2),f=m[0],p=m[1],b=Object(n.useState)({}),h=Object(s.a)(b,2),g=h[0],E=h[1],y=Object(n.useState)(!1),v=Object(s.a)(y,2),w=v[0],_=v[1],x=Object(n.useState)([]),k=Object(s.a)(x,2),S=k[0],C=k[1],N=Object(n.useState)(!1),P=Object(s.a)(N,2),R=P[0],T=P[1];return Object(n.useEffect)((function(){fa.get("/patients/"+t.params.id,pa()).then((function(e){var a=e.data.patient.name.first_name,n=e.data.patient.name.last_name;E({id:t.params.id,firstname:a,lastname:n})})).catch((function(e){_(!0),C(["Cannot get patient details. Please try again later. Contact admin if problem persist!"])}))}),[]),Object(n.useEffect)((function(){T(!0),fa.get("/metrics/patients/"+t.params.id,pa()).then((function(e){var t=[];e.data.metrics.length>0?(e.data.metrics.forEach((function(e){t.push({id:e._id,height:e.height,weight:e.weight,bmi:ba(e.BMI),weight_status:e.weight_status,pregnant:e.pregnancy_status,blood_group:e.blood_group,smoking:e.smoking_status,drinking_alcohol:e.current_alcohol_drinking,comorbidity:e.comorbidity.answer,cormorbidity_details:e.comorbidity.details,testing_indication:e.indication_for_testing,created_by:e.created_by,created_at:e.created_at,updated_by:e.updated_by,updated_at:e.updated_at})})),setTimeout((function(){p(t),T(!1),_(!1),C([])}),500)):(T(!1),_(!1),C([]))})).catch((function(e){T(!1),_(!0),C(["Error fetching patient's anthropometric data. Try again later and contact admin if problem persist"])}))}),[]),r.a.createElement("div",{className:a.root},r.a.createElement(Ce.a,{className:a.backdrop,open:R},r.a.createElement(Ne.a,{color:"inherit"})),!R&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},g.firstname,", Anthropometric"),r.a.createElement("div",null,w&&r.a.createElement(U.a,{severity:"error"},S.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(tt.a,{title:"",icons:o,columns:u,data:f,editable:{onRowAdd:function(e){return new Promise((function(t,a){!function(e,t,a){var n=0,r=0,c=0,o="N/A";void 0===e.weight||void 0===e.height?(n=0,r=0,c=0):(n=e.weight,r=e.height/100,o=(c=ba(n/(r*r)))<18.5?"underweight":c>=18.5&&c<=24.9?"normal weight":c>=25&&c<=29.9?"overweight":c>=30?"obesity":"unknown");var l=[];if(void 0===e.height&&l.push("Please enter height"),void 0===e.weight&&l.push("Please enter weight"),void 0===e.pregnant&&l.push("Please select pregnancy status"),void 0===e.blood_group&&l.push("Please select blood group"),void 0===e.smoking&&l.push("Please select smoking status"),void 0===e.drinking_alcohol&&l.push("Please select alcohol drinking status"),void 0===e.comorbidity&&l.push("Please select comorbidity"),void 0===e.testing_indication&&l.push("Please select if you want to be tested"),l.length<1){var s={patient:{_id:g.id,name:{first_name:g.firstname,last_name:g.lastname}},height:e.height,weight:e.weight,BMI:c,weight_status:o,pregnancy_status:e.pregnant,blood_group:e.blood_group,smoking_status:e.smoking,current_alcohol_drinking:e.drinking_alcohol,comorbidity:{answer:e.comorbidity,details:e.cormorbidity_details},indication_for_testing:e.testing_indication,created_by:i.id,created_at:new Date,updated_by:i.id,updated_at:new Date};fa.post("/metrics",s,pa()).then((function(e){var a=e.data.createdAnthropometric,n={id:a._id,height:a.height,weight:a.weight,bmi:a.BMI,weight_status:a.weight_status,pregnant:a.pregnancy_status,blood_group:a.blood_group,smoking:a.smoking_status,drinking_alcohol:a.current_alcohol_drinking,comorbidity:a.comorbidity.answer,cormorbidity_details:a.comorbidity.details,testing_indication:a.indication_for_testing,created_by:a.created_by,created_at:a.created_at,updated_by:a.updated_by,updated_at:a.updated_at},r=Object(Fe.a)(f);r.push(n),p(r),C([]),_(!1),setTimeout((function(){t()}),500)})).catch((function(e){_(!0),C(["Error adding patient anthropometrics Please try again later. If problem persist, contact admin"]),a()}))}else C(l),_(!0),a()}(e,t,a)}))},onRowUpdate:function(e,t){return new Promise((function(a,n){!function(e,t,a,n){var r=0,c=0,o="N/A";void 0===e.weight||void 0===e.height?(0,r=0,c=0):o=(c=e.weight/((r=e.height/100)*r))<18.5?"underweight":c>=18.5&&c<=24.9?"normal weight":c>=25&&c<=29.9?"overweight":c>=30?"obesity":"unknown";var l=e.id,s=[];if(""===e.height&&s.push("Please enter height"),""===e.weight&&s.push("Please enter weight"),""===e.pregnant&&s.push("Please select pregnancy status"),""===e.blood_group&&s.push("Please select blood group"),""===e.smoking&&s.push("Please select smoking status"),""===e.drinking_alcohol&&s.push("Please select alcohol drinking status"),""===e.comorbidity&&s.push("Please select comorbidity"),""===e.testing_indication&&s.push("Please select if you want to be tested"),s.length<1){var u=[{propName:"height",value:e.height},{propName:"weight",value:e.weight},{propName:"BMI",value:c},{propName:"weight_status",value:o},{propName:"pregnancy_status",value:e.pregnant},{propName:"blood_group",value:e.blood_group},{propName:"smoking_status",value:e.smoking},{propName:"current_alcohol_drinking",value:e.drinking_alcohol},{propName:"comorbidity.answer",value:e.comorbidity},{propName:"comorbidity.details",value:e.cormorbidity_details},{propName:"indication_for_testing",value:e.testing_indication},{propName:"updated_by",value:i.id},{propName:"updated_at",value:new Date}];fa.patch("/metrics/"+l,u,pa()).then((function(e){var n=e.data.updatedMetric,r={id:n._id,height:n.height,weight:n.weight,bmi:ba(n.BMI),weight_status:n.weight_status,pregnant:n.pregnancy_status,blood_group:n.blood_group,smoking:n.smoking_status,drinking_alcohol:n.current_alcohol_drinking,comorbidity:n.comorbidity.answer,cormorbidity_details:n.comorbidity.details,testing_indication:n.indication_for_testing,created_by:n.created_by,created_at:n.created_at,updated_by:n.updated_by,updated_at:n.updated_at},c=Object(Fe.a)(f);c[f.indexOf(t)]=r,p(c),C([]),_(!1),setTimeout((function(){a()}),500)})).catch((function(e){_(!0),C(["Error updating patient anthropometrics Please try again later. If problem persist, contact admin"]),n()}))}else C(s),_(!0),n()}(e,t,a,n)}))},onRowDelete:function(e){return new Promise((function(e){setTimeout((function(){e()}),600)}))}}})))},Oa=we.a.create({baseURL:"http://localhost:3000/api"});function Ea(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var ja=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var ya=function(e){var t=e.match,a=ja(),c=Object(l.f)(),i={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Et.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},o=[{title:"id",field:"id",hidden:!0},{title:"Symptoms",field:"symptom",editComponent:function(){return r.a.createElement(ze.a,{value:W,onChange:function(e,t){return G(t)},id:"combo-box-symptoms",options:k,style:{width:200},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}},{title:"Outcome",field:"outcome"},{title:"Onset",field:"onset",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:me,onChange:Re,variant:"inline"}))}},{title:"Country",field:"country",editComponent:function(){return r.a.createElement(Ct.a,{value:Z,onChange:function(e){return ee(e.target.value)}},A.map((function(e){return r.a.createElement(Nt.a,{key:e._id,value:e.name},e.name)})))}},{title:"City",field:"city",editComponent:function(){return r.a.createElement(ze.a,{value:Y,onChange:function(e,t){return V(t)},id:"combo-box-city",options:I,style:{width:200},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}},{title:"Duration (days)",field:"duration",type:"numeric"},{title:"Severity",field:"severity",lookup:{low:"low",medium:"medium",high:"high"}},{title:"Admission date",field:"admission",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:ne,onChange:Te,variant:"inline"}))}},{title:"Discharged/death date",field:"discharged",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:oe,onChange:Ie,variant:"inline"}))}},{title:"Comment",field:"comment"},{title:"Created by",field:"created_by",hidden:!0},{title:"Updated by",field:"updated_by",hidden:!0},{title:"Created at",field:"created_at",editable:"never",render:function(e){return r.a.createElement(Pe.a,{component:"button",variant:"body2",onClick:function(){return c.push("/profile/"+e.created_by)}},void 0==e?" ":e.created_at)}},{title:"Updated at",field:"updated_at",editable:"never",render:function(e){return r.a.createElement(Pe.a,{component:"button",variant:"body2",onClick:function(){return c.push("/profile/"+e.updated_by)},href:"#"},void 0==e?" ":e.updated_at)}}],u=Object(n.useState)(!1),d=Object(s.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)([]),b=Object(s.a)(p,2),h=b[0],g=b[1],E=Object(n.useState)([]),y=Object(s.a)(E,2),v=y[0],w=y[1],_=Object(n.useState)([]),x=Object(s.a)(_,2),k=x[0],S=x[1],C=Object(n.useState)([]),N=Object(s.a)(C,2),P=(N[0],N[1]),R=Object(n.useState)([]),T=Object(s.a)(R,2),I=T[0],D=T[1],z=Object(n.useState)([]),B=Object(s.a)(z,2),A=B[0],L=B[1],M=Object(n.useState)(""),F=Object(s.a)(M,2),W=F[0],G=F[1],J=Object(n.useState)(""),H=Object(s.a)(J,2),$=H[0],K=(H[1],Object(n.useState)("")),q=Object(s.a)(K,2),Y=q[0],V=q[1],Q=Object(n.useState)(""),X=Object(s.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useState)(new Date("1987-08-18T21:11:54")),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(new Date("1987-08-18T21:11:54")),ie=Object(s.a)(ce,2),oe=ie[0],le=ie[1],se=Object(n.useState)(new Date("1987-08-18T21:11:54")),ue=Object(s.a)(se,2),me=ue[0],fe=ue[1],pe=Object(n.useContext)(xe).healthworker,be=Object(n.useState)({}),he=Object(s.a)(be,2),ge=he[0],Oe=he[1],Ee=Object(n.useState)(!1),je=Object(s.a)(Ee,2),ye=je[0],ve=je[1],we=Object(n.useState)(!1),_e=Object(s.a)(we,2),ke=(_e[0],_e[1],Object(n.useState)(!1)),Se=Object(s.a)(ke,2),Re=(Se[0],Se[1],function(e){fe(e)}),Te=function(e){re(e)},Ie=function(e){le(e)};return Object(n.useEffect)((function(){Oa.get("/patients/"+t.params.id,Ea()).then((function(e){var a=e.data.patient.name.first_name,n=e.data.patient.name.last_name;Oe({id:t.params.id,firstname:a,lastname:n})})).catch((function(e){f(!0),g(["Cannot get patient details. Please try again later. Contact admin if problem persist!"])}))}),[]),Object(n.useEffect)((function(){Oa.get("/countries",Ea()).then((function(e){L(e.data),f(!1),g([])})).catch((function(e){f(!0),g(["Could not load countries. Try again later and contact admin if problem persist"])}))}),[]),Object(n.useEffect)((function(){ve(!0),Z&&Oa.get("/countries/"+Z).then((function(e){D(e.data.cities.sort()),e.data.cities.includes(Y)||V(e.data.cities[0]),f(!1),g([]),setTimeout((function(){ve(!1)}),100)})).catch((function(e){f(!0),g(["Could not load cities. Try again later and contact admin if problem persist"]),ve(!1)}))}),[Z]),Object(n.useEffect)((function(){ve(!0),Oa.get("/symptoms",Ea()).then((function(e){S(e.data[0].symptoms),setTimeout((function(){f(!1),g([]),ve(!1)}),250)})).catch((function(e){f(!0),g(["Error fetching list of symptoms. Try again later and contact admin if problem persist"])})),Oa.get("/symptom_class",Ea()).then((function(e){P(e.data[0].classes),setTimeout((function(){f(!1),g([]),ve(!1)}),250)})).catch((function(e){"Auth failed"===e.response.data.message?(c.push("/healthworker/logout"),ve(!1)):(ve(!1),f(!0),g(["Error fetching list of symptoms class. Try again later and contact admin if problem persist"]))}))}),[]),Object(n.useEffect)((function(){ve(!0),Oa.get("/patient_symptoms/patients/"+t.params.id,Ea()).then((function(e){var t=[];e.data.patient_symptoms?e.data.patient_symptoms.length>0&&(e.data.patient_symptoms.forEach((function(e){t.push({id:e._id,symptom:e.symptom,symptom_class:e.symptom_class,outcome:e.outcome,onset:e.onset,country:e.location.country,city:e.location.city,duration:e.duration,severity:e.severity,admission:e.admission_date,discharged:e.discharged_death_date,comment:e.comment,created_by:e.created_by,created_at:e.created_at,updated_by:e.updated_by,updated_at:e.updated_at})})),setTimeout((function(){w(t),ve(!1)}),500)):setTimeout((function(){w(t),ve(!1)}),500)})).catch((function(e){"Auth failed"===e.response.data.message?(c.push("/healthworker/logout"),ve(!1)):(f(!0),g(["Error fetching patient symptom data. Try again later and contact admin if problem persist"]),ve(!1))}))}),[]),r.a.createElement("div",{className:a.root},r.a.createElement(Ce.a,{className:a.backdrop,open:ye},r.a.createElement(Ne.a,{color:"inherit"})),!ye&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},ge.firstname,", Symptoms"),r.a.createElement("div",null,m&&r.a.createElement(U.a,{severity:"error"},h.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(tt.a,{title:"",icons:i,columns:o,data:v,editable:{onRowAdd:function(e){return new Promise((function(t,a){!function(e,t,a){var n=[];if(""===W&&n.push("Please select symptom"),""===$&&n.push("Please select symptom class"),""==Z&&n.push("Please select country"),""==Y&&n.push("Please select city"),void 0===e.outcome&&n.push("Please enter outcome"),""===me&&n.push("Please select onset date"),void 0===e.duration&&n.push("Please enter duration (days)"),void 0===e.severity&&n.push("Please select severity"),""===ne&&n.push("Select hospital admission date"),""===oe&&n.push("Select discharged or death date"),n.length<1)if(n.length<1){var r={patient:{_id:ge.id,name:{first_name:ge.firstname,last_name:ge.lastname}},symptom:W,symptom_class:$,outcome:e.outcome,onset:me,location:{country:Z,city:Y},duration:e.duration,severity:e.severity,admission_date:ne,discharged_death_date:oe,comment:e.comment,created_by:pe.id,created_at:new Date,updated_by:pe.id,updated_at:new Date};Oa.post("/patient_symptoms",r,Ea()).then((function(e){var a=e.data.createdSymptoms,n={id:a._id,symptom:a.symptom,symptom_class:a.symptom_class,outcome:a.outcome,onset:a.onset,country:a.location.country,city:a.location.city,duration:a.duration,severity:a.severity,admission:a.admission_date,discharged:a.discharged_death_date,comment:a.comment,created_by:a.created_by,created_at:a.created_at,updated_by:a.updated_by,updated_at:a.updated_at},r=Object(Fe.a)(v);r.push(n),w(r),g([]),f(!1),setTimeout((function(){t()}),500)})).catch((function(e){f(!0),g(["Error adding patient symptoms! Please try again later. If problem persist, contact admin"]),a()}))}else g(n),f(!0),a();else g(n),f(!0),a()}(e,t,a)}))},onRowUpdate:function(e,t){return new Promise((function(a,n){!function(e,t,a,n){var r=[];""===e.outcome&&r.push("Please enter outcome"),""===e.duration&&r.push("Please enter duration (days)"),""===e.severity&&r.push("Please select severity");var c=e.id;if(r.length<1)if(r.length<1){var i=[{propName:"symptom",value:W||t.symptom},{propName:"symptom_class",value:$||t.symptom_class},{propName:"outcome",value:e.outcome},{propName:"onset",value:me||t.onset},{propName:"location.country",value:Z||t.country},{propName:"location.city",value:Y||t.city},{propName:"duration",value:e.duration},{propName:"severity",value:e.severity},{propName:"admission_date",value:ne||t.admission},{propName:"discharged_death_date",value:oe||t.disableFuture},{propName:"comment",value:e.comment},{propName:"updated_by",value:pe.id},{propName:"updated_at",value:new Date}];Oa.patch("/patient_symptoms/"+c,i,Ea()).then((function(e){var n=e.data.updatedSymptoms,r={id:n._id,symptom:n.symptom,symptom_class:n.symptom_class,outcome:n.outcome,onset:n.onset,country:n.location.country,city:n.location.city,duration:n.duration,severity:n.severity,admission:n.admission_date,discharged:n.discharged_death_date,comment:n.comment,created_by:n.created_by,created_at:n.created_at,updated_by:n.updated_by,updated_at:n.updated_at},c=Object(Fe.a)(v);c[v.indexOf(t)]=r,w(c),g([]),f(!1),setTimeout((function(){a()}),500)})).catch((function(e){f(!0),g(["Error updating patient symptoms! Please try again later. If problem persist, contact admin"]),n()}))}else g(r),f(!0),n();else g(r),f(!0),n()}(e,t,a,n)}))},onRowDelete:function(e){return new Promise((function(e){setTimeout((function(){e()}),600)}))}}})))},va=we.a.create({baseURL:"http://localhost:3000/api"});function wa(){var e=JSON.parse(window.localStorage.getItem("login"));return e?{headers:{Authorization:"Bearer "+e.token}}:null}var _a=Object(y.a)((function(e){return{root:{margin:e.spacing(5)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var xa=function(e){var t=e.match,a=_a(),c=Object(l.f)(),i=Object(n.useContext)(xe).healthworker,o={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Et.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(j.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},u=[{title:"id",field:"id",hidden:!0},{title:"Diagnostic",field:"diagnostic",editComponent:function(){return r.a.createElement(ze.a,{value:M,onChange:function(e,t){return F(t)},id:"combo-box-diagnostics",options:S,style:{width:200},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}},{title:"Outcome",field:"outcome"},{title:"Diagnostic date",field:"diagnostic_date",editComponent:function(){return r.a.createElement(Rt.a,{utils:Pt.default},r.a.createElement(Tt.a,{disableFuture:"true",format:"dd/MM/yyyy",value:J,onChange:le,variant:"inline"}))}},{title:"Country",field:"country",editComponent:function(){return r.a.createElement(Ct.a,{value:X,onChange:function(e){return Z(e.target.value)}},z.map((function(e){return r.a.createElement(Nt.a,{key:e._id,value:e.name},e.name)})))}},{title:"City",field:"city",editComponent:function(){return r.a.createElement(ze.a,{value:q,onChange:function(e,t){return Y(t)},id:"combo-box-diag-city",options:R,style:{width:200},getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(de.a,e)}})}},{title:"Comment",field:"comment"},{title:"Created by",field:"created_by",hidden:!0},{title:"Updated by",field:"updated_by",hidden:!0},{title:"Created at",field:"created_at",editable:"never",render:function(e){return r.a.createElement(Pe.a,{component:"button",variant:"body2",onClick:function(){return c.push("/profile/"+e.created_by)}},void 0==e?" ":e.created_at)}},{title:"Updated at",field:"updated_at",editable:"never",render:function(e){return r.a.createElement(Pe.a,{component:"button",variant:"body2",onClick:function(){return c.push("/profile/"+e.updated_by)},href:"#"},void 0==e?" ":e.updated_at)}}],d=Object(n.useState)(!1),m=Object(s.a)(d,2),f=m[0],p=m[1],b=Object(n.useState)([]),h=Object(s.a)(b,2),g=h[0],E=h[1],y=Object(n.useState)([]),v=Object(s.a)(y,2),w=v[0],_=v[1],x=Object(n.useState)([]),k=Object(s.a)(x,2),S=k[0],C=k[1],N=Object(n.useState)([]),P=Object(s.a)(N,2),R=P[0],T=P[1],I=Object(n.useState)([]),D=Object(s.a)(I,2),z=D[0],B=D[1],A=Object(n.useState)(""),L=Object(s.a)(A,2),M=L[0],F=L[1],W=Object(n.useState)(new Date("1987-08-18T21:11:54")),G=Object(s.a)(W,2),J=G[0],H=G[1],$=Object(n.useState)(""),K=Object(s.a)($,2),q=K[0],Y=K[1],V=Object(n.useState)(""),Q=Object(s.a)(V,2),X=Q[0],Z=Q[1],ee=Object(n.useState)({}),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(s.a)(re,2),ie=ce[0],oe=ce[1],le=function(e){H(e)};return Object(n.useEffect)((function(){va.get("/countries",wa()).then((function(e){B(e.data),p(!1),E([])})).catch((function(e){p(!0),E(["Could not load countries. Try again later and contact admin if problem persist"])}))}),[]),Object(n.useEffect)((function(){va.get("/patients/"+t.params.id,wa()).then((function(e){var a=e.data.patient.name.first_name,n=e.data.patient.name.last_name;ne({id:t.params.id,firstname:a,lastname:n})})).catch((function(e){p(!0),E(["Cannot get patient details. Please try again later. Contact admin if problem persist!"])}))}),[]),Object(n.useEffect)((function(){oe(!0),X&&va.get("/countries/"+X).then((function(e){T(e.data.cities.sort()),e.data.cities.includes(q)||Y(e.data.cities[0]),p(!1),E([]),setTimeout((function(){oe(!1)}),100)})).catch((function(e){p(!0),E(["Could not load cities. Try again later and contact admin if problem persist"]),oe(!1)}))}),[X]),Object(n.useEffect)((function(){oe(!0),va.get("/diagnostics",wa()).then((function(e){C(e.data[0].diagnostics),setTimeout((function(){oe(!1),p(!1),E([])}),500)})).catch((function(e){p(!0),E(["Error fetching diagnostics list. Try again later and contact admin if problem persist"]),oe(!1)}))}),[]),Object(n.useEffect)((function(){oe(!0),va.get("/patient_diagnostics/patients/"+t.params.id,wa()).then((function(e){var t=[];e.data.patient_diagnostics?e.data.patient_diagnostics.length>0&&(e.data.patient_diagnostics.forEach((function(e){t.push({id:e._id,diagnostic:e.diagnostic,diagnostic_date:e.diagnostic_date,outcome:e.outcome,country:e.location.country,city:e.location.city,comment:e.comment,created_by:e.created_by,created_at:e.created_at,updated_by:e.updated_by,updated_at:e.updated_at})})),setTimeout((function(){_(t),oe(!1)}),500)):setTimeout((function(){_(t),oe(!1)}),50)})).catch((function(e){p(!0),E(["Error fetching diagnostics. Try again later and contact admin if problem persist"]),oe(!1)}))}),[]),r.a.createElement("div",{className:a.root},r.a.createElement(Ce.a,{className:a.backdrop,open:ie},r.a.createElement(Ne.a,{color:"inherit"})),!ie&&r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},ae.firstname,", Diagnostics"),r.a.createElement("div",null,f&&r.a.createElement(U.a,{severity:"error"},g.map((function(e,t){return r.a.createElement("div",{key:t},e)})))),r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(tt.a,{title:"",icons:o,columns:u,data:w,editable:{onRowAdd:function(e){return new Promise((function(t,a){!function(e,t,a){var n=[];if(""===M&&n.push("Please select diagnostic"),""===X&&n.push("Please select country"),""===q&&n.push("Please select city"),void 0===e.outcome&&n.push("Please enter outcome"),""===J&&n.push("Select diagnostic date date"),n.length<1)if(n.length<1){var r={patient:{_id:ae.id,name:{first_name:ae.firstname,last_name:ae.lastname}},diagnostic:M,outcome:e.outcome,diagnostic_date:J,location:{country:X,city:q},comment:e.comment,created_by:i.id,created_at:new Date,updated_by:i.id,updated_at:new Date};va.post("/patient_diagnostics",r,wa()).then((function(e){console.log("ldjflasjfla"),console.log(e.data);var a=e.data.createdDiagnostic,n={id:a._id,diagnostic:a.diagnostic,diagnostic_date:a.diagnostic_date,outcome:a.outcome,country:a.location.country,city:a.location.city,comment:a.comment,created_by:a.created_by,created_at:a.created_at,updated_by:a.updated_by,updated_at:a.updated_at},r=Object(Fe.a)(w);r.push(n),_(r),E([]),p(!1),setTimeout((function(){t()}),500)})).catch((function(e){p(!0),E(["Error adding patient diagnostic! Please try again later. If problem persist, contact admin"]),a()}))}else E(n),p(!0),a();else E(n),p(!0),a()}(e,t,a)}))},onRowUpdate:function(e,t){return new Promise((function(a,n){!function(e,t,a,n){var r=[];""===e.outcome&&r.push("Please enter outcome");var c=e.id;if(r.length<1)if(r.length<1){var o=[{propName:"diagnostic",value:M||t.diagnostic},{propName:"outcome",value:e.outcome},{propName:"diagnostic_date",value:J||t.diagnostic_date},{propName:"location.country",value:X||t.country},{propName:"location.city",value:q||t.city},{propName:"comment",value:e.comment},{propName:"updated_by",value:i.id},{propName:"updated_at",value:new Date}];va.patch("/patient_diagnostics/"+c,o,wa()).then((function(e){var n=e.data.updatedDiagnostics,r={id:n._id,diagnostic:n.diagnostic,diagnostic_date:n.diagnostic_date,outcome:n.outcome,country:n.location.country,city:n.location.city,comment:n.comment,created_by:n.created_by,created_at:n.created_at,updated_by:n.updated_by,updated_at:n.updated_at},c=Object(Fe.a)(w);c[w.indexOf(t)]=r,_(c),E([]),p(!1),setTimeout((function(){a()}),500)})).catch((function(e){p(!0),E(["Error updating patient diagnostic! Please try again later. If problem persist, contact admin"]),n()}))}else E(r),p(!0),n();else E(r),p(!0),n()}(e,t,a,n)}))},onRowDelete:function(e){return new Promise((function(e){setTimeout((function(){e()}),600)}))}}})))},ka=we.a.create({baseURL:"http://localhost:3000/api"}),Sa=function(e,t){switch(t.type){case"GET_NUM_DOCTORS":ka.get("/healthworkers/number",t.token).then((function(t){return e.num_doctors=t.data.count,e})).catch((function(t){return e.num_doctors=0,e}));case"GET_NUM_PATIENTS":ka.get("/patients/number").then((function(t){return e.num_patients=t.data.count,e})).catch((function(t){return e.num_patients=0,e}));default:return e}},Ca=Object(n.createContext)(),Na=function(e){var t=Object(n.useReducer)(Sa,{num_doctors:0,num_patients:0}),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement(Ca.Provider,{value:{state:c,dispatched:i}},e.children)},Pa=a(615),Ra=a.n(Pa);function Ta(){var e=Object(l.f)(),t=Object(n.useContext)(xe).dispatch;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",null,r.a.createElement(Ra.a,{style:{color:"grey",fontSize:150}})),r.a.createElement("h1",{style:{padding:10,color:"rgba(245, 0, 87, 1)"}},"Session expired"),r.a.createElement("p",{style:{fontSize:"large"}},"You have been logged out due to inactivity. ",r.a.createElement(le.a,{onClick:function(){t({type:"LOGOUT"}),e.push("/login")},color:"primary"},r.a.createElement("b",{style:{fontSize:"large"}},"SIGN IN"))," again!"),r.a.createElement(C.a,null),r.a.createElement("p",null,r.a.createElement("div",null,"Unauthorize use of the application is prohibit and subject to ",r.a.createElement("b",null,"prosecution by law")),r.a.createElement("div",{style:{marginTop:"50px",color:"grey"}},"\xa9 Copyright ",(new Date).getFullYear(),"  All rights reserved!")))}var Ia=we.a.create({baseURL:"http://localhost:3000/api"}),Da=se.a[500],za=se.a[400],Ba=ue.a[500],Aa=(ue.a[50],Object(y.a)((function(e){var t;return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:za},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,height:"100vh",backgroundColor:Da,padding:e.spacing(1)},listItems:{margin:10,color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.2)",borderRadius:10}},listItemDone:{margin:10,color:"white",borderRadius:10,"&,&:focus":{backgroundColor:Ba}},icon_color:{color:"white",fontSize:30},nested:(t={marginLeft:e.spacing(3),color:"white",marginRight:5,marginTop:5,marginBottom:5},Object(d.a)(t,"color","white"),Object(d.a)(t,"&:hover",{backgroundColor:"rgba(255,255,255,0.2)",borderRadius:10}),t),nestedDone:{marginLeft:e.spacing(3),marginRight:5,marginTop:5,marginBottom:5,color:"white",borderRadius:10,"&,&:focus":{backgroundColor:Ba}},logo:{color:"white",alignItems:"center"},drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})));function La(){var e=Aa(),t=Object(l.f)(),a=Object(l.g)(),c=r.a.useState(!1),i=Object(s.a)(c,2),o=i[0],u=i[1],b=r.a.useState(!1),g=Object(s.a)(b,2),E=g[0],y=g[1],T=Object(n.useContext)(xe).dispatch,D=Object(n.useState)(!1),B=Object(s.a)(D,2),W=B[0],J=B[1],$=Object(n.useState)(""),q=Object(s.a)($,2),V=q[0],X=q[1],ee=Object(n.useState)(!0),ae=Object(s.a)(ee,2),re=ae[0],ie=ae[1],se=Object(n.useState)(!1),ue=Object(s.a)(se,2),de=ue[0],me=(ue[1],Object(n.useState)([])),fe=Object(s.a)(me,2),pe=fe[0],be=(fe[1],Object(n.useState)(0)),he=Object(s.a)(be,2),ge=he[0],Oe=he[1],Ee=Object(n.useState)(0),je=Object(s.a)(Ee,2),ye=je[0],ve=je[1],we=Object(n.useState)({}),_e=Object(s.a)(we,2),ke=_e[0],Se=_e[1],Ce=Object(n.useState)(0),Ne=Object(s.a)(Ce,2),Pe=Ne[0],Re=Ne[1],Te=Object(n.useState)(0),Ie=Object(s.a)(Te,2),ze=Ie[0],Be=Ie[1],Ae=Object(n.useState)(0),Le=Object(s.a)(Ae,2),Me=Le[0],Fe=Le[1],We=Object(n.useState)(!1),Ge=Object(s.a)(We,2),Je=Ge[0],He=Ge[1],$e=Object(n.useState)(!0),Ke=Object(s.a)($e,2),qe=Ke[0],Ye=Ke[1],Ve=Object(n.useState)(!1),Qe=Object(s.a)(Ve,2),Xe=Qe[0],et=Qe[1],tt=Object(n.useState)(!1),at=Object(s.a)(tt,2),nt=at[0],rt=at[1],ct=Object(n.useState)(!1),it=Object(s.a)(ct,2),ot=it[0],lt=it[1],st=Object(n.useState)(!1),ut=Object(s.a)(st,2),dt=ut[0],mt=ut[1],ft=Object(n.useState)(!1),pt=Object(s.a)(ft,2),bt=pt[0],ht=pt[1],gt=Object(n.useState)(!1),Ot=Object(s.a)(gt,2),Et=Ot[0],jt=Ot[1],yt=Object(n.useContext)(Ca),vt=(yt.state,yt.dispatched,Object(n.useContext)(Zt)),wt=vt.patientData,_t=(vt.dispatchPatient,function(e){switch(e){case"click_dashboard":He(!1),Ye(!0),et(!1),rt(!1),lt(!1),mt(!1),ht(!1),jt(!1);break;case"click_profile":He(!0),Ye(!1),et(!1),rt(!1),lt(!1),mt(!1),ht(!1),jt(!1);break;case"click_doctors":He(!1),Ye(!1),et(!0),rt(!1),lt(!1),mt(!1),ht(!1),jt(!1);break;case"click_patients":He(!1),Ye(!1),et(!1),rt(!0),lt(!1),mt(!1),ht(!1),jt(!1);break;case"click_bio":He(!1),Ye(!1),et(!1),rt(!1),lt(!0),mt(!1),ht(!1),jt(!1);break;case"click_metrics":He(!1),Ye(!1),et(!1),rt(!1),lt(!1),mt(!0),ht(!1),jt(!1);break;case"click_symptoms":He(!1),Ye(!1),et(!1),rt(!1),lt(!1),mt(!1),ht(!0),jt(!1);break;case"click_diagnostics":He(!1),Ye(!1),et(!1),rt(!1),lt(!1),mt(!1),ht(!1),jt(!0);break;default:He(!1),Ye(!0),et(!1),rt(!1),lt(!1),mt(!1),ht(!1),jt(!1)}}),xt=Object(f.a)();return Object(n.useEffect)((function(){Re(wt.num_metrics),Fe(wt.num_diagnostics),Be(wt.num_symptoms)}),[wt]),Object(n.useEffect)((function(){a.pathname;Ia.get("/healthworkers/number").then((function(e){ve(e.data.count)})).catch((function(e){ve(0)})),Ia.get("/patients/number").then((function(e){Oe(e.data.count)})).catch((function(e){Oe(0)}))}),[a.pathname]),Object(n.useEffect)((function(){a.pathname;var e=JSON.parse(window.localStorage.getItem("login")),n={};e?(Se({_id:e.id,firstname:e.fname,lastname:e.lname}),n={headers:{Authorization:"Bearer "+e.token}},Ia.get("/healthworkers/verify/"+e.id,n).then((function(e){T({type:"LOGIN",healthworker:{login:!0,id:e.data._id,token:e.data.token,fname:e.data.fname,lname:e.data.lname}}),ie(!1)})).catch((function(e){ie(!0),t.push("/healthworker/logout")}))):(ie(!0),T({type:"LOGOUT"}),"/login"===a.pathname?t.push("/login"):t.push("/signup"))}),[a.pathname]),Object(n.useEffect)((function(){var e=a.pathname;if(("/patients"===e||"/healthworkers"===e||"/signup"===e||"/login"===e||e.startsWith("/dashboard/")||"/healthworker/logout"===e)&&J(!1),e.startsWith("/patients/biodata/")||e.startsWith("/patients/anthropometrics/")||e.startsWith("/patients/symptoms/")||e.startsWith("/patients/diagnostics/")){J(!0),u(!0);var t=e.split("/"),n=t[t.length-1];X(n)}}),[a.pathname]),r.a.createElement("div",{className:e.root},r.a.createElement(w.a,null),r.a.createElement(_.a,{position:"fixed",className:Object(m.a)(e.appBar,Object(d.a)({},e.appBarShift,E))},r.a.createElement(x.a,null,r.a.createElement(p.a,{color:"inherit","aria-label":"open drawer",onClick:function(){y(!0)},edge:"start",className:Object(m.a)(e.menuButton,E&&e.hide)},r.a.createElement(h.a,null)),r.a.createElement(S.a,{variant:"h6",noWrap:!0},"Medilinkup"),W?r.a.createElement("div",null,r.a.createElement(le.a,{onClick:function(){return t.push("/patients/biodata/"+V)},color:"inherit"},"Bio"),r.a.createElement(le.a,{onClick:function(){return t.push("/patients/anthropometrics/"+V)},color:"inherit"},"Anthropometrics"),r.a.createElement(le.a,{onClick:function(){return t.push("/patients/symptoms/"+V)},color:"inherit"},"Symptoms"),r.a.createElement(le.a,{onClick:function(){return t.push("/patients/diagnostics/"+V)},color:"inherit"},"Diagnostics"),r.a.createElement(le.a,{onClick:function(){return t.push("/patients/charts/"+V)},color:"inherit"},"Charts")):r.a.createElement("div",null))),r.a.createElement(v.a,{className:e.drawer,variant:"persistent",anchor:"left",open:E,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement("div",{className:e.logo},r.a.createElement("h2",null,"MEDILINKUP")),r.a.createElement(p.a,{onClick:function(){y(!1)}},"ltr"===xt.direction?r.a.createElement(O.a,null):r.a.createElement(j.a,null))),r.a.createElement(C.a,null),re?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement(k.a,{component:"nav","aria-label":"main mailbox folders",style:{paddingRight:15}},r.a.createElement(N.a,{className:e.listItems,button:!0,onClick:function(){return t.push("/healthworkers")}},r.a.createElement(P.a,null,r.a.createElement(M.a,{maxInitials:1,size:40,round:!0,name:ke.firstname})),r.a.createElement(R.a,{primary:ke.firstname+" "+ke.lastname})))),r.a.createElement(C.a,null),r.a.createElement(C.a,null),re?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement(k.a,{component:"nav","aria-label":"main mailbox folders",style:{paddingRight:15}},r.a.createElement(N.a,{className:qe?e.listItemDone:e.listItems,button:!0,onClick:function(){_t("click_dashboard"),t.push("/dashboard/"+ke._id)}},r.a.createElement(P.a,null,r.a.createElement(oe.a,{className:e.icon_color})),r.a.createElement(R.a,{primary:"Dashboard"})),r.a.createElement(N.a,{className:Je?e.listItemDone:e.listItems,button:!0,onClick:function(){_t("click_profile"),t.push("/profile/"+ke._id)}},r.a.createElement(P.a,null,r.a.createElement(H.a,{className:e.icon_color})),r.a.createElement(R.a,{primary:"Profile"})),r.a.createElement(N.a,{className:Xe?e.listItemDone:e.listItems,button:!0,onClick:function(){_t("click_doctors"),t.push("/healthworkers")}},r.a.createElement(P.a,null,r.a.createElement(F.a,{color:"secondary",badgeContent:ye},r.a.createElement(Y.a,{className:e.icon_color}))),r.a.createElement(R.a,{primary:"Doctors"})),r.a.createElement(N.a,{className:e.listItems,button:!0,onClick:function(){u(!o)}},r.a.createElement(P.a,null,r.a.createElement(F.a,{color:"secondary",badgeContent:ge},r.a.createElement(K.a,{className:e.icon_color}))),r.a.createElement(R.a,{primary:"Patients"}),o?r.a.createElement(I.a,null):r.a.createElement(z.a,null)),r.a.createElement(L.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(k.a,{component:"div",style:{paddingRight:10}},r.a.createElement(N.a,{className:nt?e.nestedDone:e.nested,button:!0,onClick:function(){_t("click_patients"),t.push("/patients")}},r.a.createElement(P.a,null,r.a.createElement(F.a,{color:"secondary",badgeContent:ge},r.a.createElement(Q.a,{className:e.icon_color}))),r.a.createElement(R.a,{primary:"List"})),W?r.a.createElement("div",null,r.a.createElement(N.a,{button:!0,onClick:function(){_t("click_bio"),t.push("/patients/biodata/"+V)},className:ot?e.nestedDone:e.nested},r.a.createElement(P.a,null,r.a.createElement(te.a,{className:e.icon_color})),r.a.createElement(R.a,{primary:"Bio"})),r.a.createElement(N.a,{button:!0,onClick:function(){_t("click_metrics"),t.push("/patients/anthropometrics/"+V)},className:dt?e.nestedDone:e.nested},r.a.createElement(P.a,null,r.a.createElement(F.a,{color:"secondary",badgeContent:Pe},r.a.createElement(ne.a,{className:e.icon_color}))),r.a.createElement(R.a,{primary:"Anthropometrics"})),r.a.createElement(N.a,{button:!0,onClick:function(){_t("click_symptoms"),t.push("/patients/symptoms/"+V)},className:bt?e.nestedDone:e.nested},r.a.createElement(P.a,null,r.a.createElement(F.a,{color:"secondary",badgeContent:ze},r.a.createElement(A.a,{className:e.icon_color}))),r.a.createElement(R.a,{primary:"Symptoms"})),r.a.createElement(N.a,{button:!0,onClick:function(){t.push("/patients/diagnostics/"+V),_t("click_diagnostics")},className:Et?e.nestedDone:e.nested},r.a.createElement(P.a,null,r.a.createElement(F.a,{color:"secondary",badgeContent:Me},r.a.createElement(Z.a,{className:e.icon_color}))),r.a.createElement(R.a,{primary:"Diagnostics"})),r.a.createElement(N.a,{button:!0,onClick:function(){return t.push("/patients/charts/"+V)},className:e.nested},r.a.createElement(P.a,null,r.a.createElement(G.a,{className:e.icon_color})),r.a.createElement(R.a,{primary:"Charts"}))):r.a.createElement("div",null))),r.a.createElement(N.a,{className:e.listItems,button:!0,onClick:function(){T({type:"LOGOUT"}),ie(!0),t.push("/login")}},r.a.createElement(P.a,null,r.a.createElement(ce.a,{className:e.icon_color})),r.a.createElement(R.a,{primary:"LOGOUT"}))))),r.a.createElement("main",{className:Object(m.a)(e.content,Object(d.a)({},e.contentShift,E))},r.a.createElement("div",{className:e.drawerHeader}),r.a.createElement("div",{className:e.toolbar}),r.a.createElement("div",null,de&&r.a.createElement(U.a,{severity:"error"},pe.map((function(e,t){return r.a.createElement("div",{key:t},e)}))),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/healthworkers",component:Qt}),r.a.createElement(l.a,{exact:!0,path:"/login",component:De}),r.a.createElement(l.a,{exact:!0,path:"/signup",component:Ue}),r.a.createElement(l.a,{exact:!0,path:"/dashboard/:id",component:Ze}),r.a.createElement(l.a,{exact:!0,path:"/profile/:id",component:At}),r.a.createElement(l.a,{exact:!0,path:"/healthworkers",component:Qt}),r.a.createElement(l.a,{exact:!0,path:"/healthworker/logout",component:Ta}),r.a.createElement(l.a,{exact:!0,path:"/patients",component:oa}),r.a.createElement(l.a,{exact:!0,path:"/patients/dashboard/:id",component:Ze}),r.a.createElement(l.a,{exact:!0,path:"/patients/biodata/:id",component:ma}),r.a.createElement(l.a,{exact:!0,path:"/patients/anthropometrics/:id",component:ga}),r.a.createElement(l.a,{exact:!0,path:"/patients/symptoms/:id",component:ya}),r.a.createElement(l.a,{exact:!0,path:"/patients/diagnostics/:id",component:xa})))))}var Ma=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(ke,null,r.a.createElement(Na,null,r.a.createElement(ea,null,r.a.createElement(l.a,{path:"/",component:La})))))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ma,null)),document.getElementById("root"))}},[[660,1,2]]]);
//# sourceMappingURL=main.b54a6196.chunk.js.map